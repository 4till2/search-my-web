<% placeholder ||= 'Search' && preload ||= false %>
<div class="w-full p-2" data-controller="search-bar">
  <%= form_with url: search_path, data: { 'search-bar-target': 'form' } do |form| %>
    <div class="w-full flex items-center">
      <%= form.hidden_field :preload, value: preload %>
      <%= form.text_field :query,
                          data: { 'search-bar-target': 'input' },
                          placeholder: placeholder,
                          value: @query,
                          autofocus: true,
                          class: 'w-full grow border-gray-400 rounded-full p-4 outline-none focus:outline-none focus:ring-0 focus:border-gray-400'
      %>
      <div data-action="click->search-bar#reset" class="ml-4 cursor-pointer text-gray-500">Clear</div>
    </div>
  <% end %>
</div>